!function(){"use strict";const e={init:function(){this.setupFormValidation(),this.setupFormSubmission(),this.setupRealTimeValidation()},setupFormValidation:function(){document.querySelectorAll("form").forEach(n=>{n.addEventListener("submit",function(t){t.preventDefault(),e.validateForm(n)&&e.submitForm(n)})})},setupRealTimeValidation:function(){document.querySelectorAll("input[required], textarea[required]").forEach(n=>{n.addEventListener("blur",function(){e.validateField(this)}),n.addEventListener("input",function(){e.clearFieldError(this)})})},validateForm:function(n){let t=!0;return n.querySelectorAll("[required]").forEach(n=>{e.validateField(n)||(t=!1)}),t},validateField:function(n){const t=n.value.trim(),s=n.type;n.name||n.getAttribute("data-i18n-placeholder")||n.placeholder;if(e.clearFieldError(n),!t)return e.showFieldError(n,"form_messages.required_field"),!1;if("email"===s){if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))return e.showFieldError(n,"form_messages.invalid_email"),!1}if("tel"===s){if(!/^[\+]?[1-9][\d]{0,15}$/.test(t.replace(/[\s\-\(\)]/g,"")))return e.showFieldError(n,"form_messages.invalid_phone"),!1}return"text"===s&&t.length<2?(e.showFieldError(n,"form_messages.name_min_length"),!1):!("TEXTAREA"===n.tagName&&t.length<10)||(e.showFieldError(n,"form_messages.message_min_length"),!1)},showFieldError:function(n,t){e.clearFieldError(n);const s=document.createElement("div");s.className="field-error",s.textContent=window.getTranslation&&window.getTranslation(t)||t,s.style.cssText="\n                color: #dc3545;\n                font-size: 12px;\n                margin-top: 4px;\n                animation: fadeIn 0.3s ease;\n            ",n.parentNode.appendChild(s),n.style.borderColor="#dc3545",n.classList.add("is-invalid")},clearFieldError:function(e){const n=e.parentNode.querySelector(".field-error");n&&n.remove(),e.style.borderColor="",e.classList.remove("is-invalid")},submitForm:function(n){const t=n.querySelector('button[type="submit"]'),s=t.innerHTML;t.innerHTML='\n                <span class="spinner-border spinner-border-sm me-2" role="status"></span>\n                Sending...\n            ',t.disabled=!0;const r=new FormData(n),i={};r.forEach((e,n)=>{i[n]=e});fetch("https://0ec90b57d6e95fcbda19832f.supabase.co/functions/v1/send-contact",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJib2x0IiwicmVmIjoiMGVjOTBiNTdkNmU5NWZjYmRhMTk4MzJmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg4ODE1NzQsImV4cCI6MTc1ODg4MTU3NH0.9I8-U0x86Ak8t2DGaIk0HfvTSLsAyzdnz-Nw00mMkKw"},body:JSON.stringify(i)}).then(e=>e.json()).then(t=>{t.success?(e.showSuccessMessage(n),n.reset()):e.showErrorMessage(n,t.error||"Failed to send message.")}).catch(t=>{e.showErrorMessage(n,t.message||"Failed to send message.")}).finally(()=>{t.innerHTML=s,t.disabled=!1})},showSuccessMessage:function(e){const n=document.createElement("div");n.className="alert alert-success";const t=window.getTranslation?window.getTranslation("form_messages.success"):"Thank you! Your message has been sent successfully. We'll get back to you soon.";n.innerHTML=`<i class="ph-bold ph-check-circle me-2"></i>${t}`,n.style.cssText="\n                margin-top: 20px;\n                animation: slideDown 0.5s ease;\n            ",e.appendChild(n),setTimeout(()=>{n.remove()},5e3)},showErrorMessage:function(e,n){const t=document.createElement("div");t.className="alert alert-danger",t.innerHTML=`<i class="ph-bold ph-x-circle me-2"></i>${n}`,t.style.cssText="\n                margin-top: 20px;\n                animation: slideDown 0.5s ease;\n            ",e.appendChild(t),setTimeout(()=>{t.remove()},7e3)},setupFormSubmission:function(){document.querySelectorAll('form[action="#"]').forEach(n=>{const t=n.querySelector('input[type="email"]');t&&n.addEventListener("submit",function(n){n.preventDefault(),e.validateField(t)&&(e.handleNewsletterSignup(t.value),t.value="")})})},handleNewsletterSignup:function(e){const n=document.createElement("div");n.className="newsletter-success";const t=window.getTranslation?window.getTranslation("form_messages.newsletter_success"):"Successfully subscribed to newsletter!";n.innerHTML=`<div class="alert alert-success position-fixed" style="top: 20px; right: 20px; z-index: 9999;"><i class="ph-bold ph-check-circle me-2"></i>${t}</div>`,document.body.appendChild(n),setTimeout(()=>{n.remove()},3e3)}},n=document.createElement("style");n.textContent="\n        @keyframes fadeIn {\n            from { opacity: 0; transform: translateY(-10px); }\n            to { opacity: 1; transform: translateY(0); }\n        }\n        \n        @keyframes slideDown {\n            from { opacity: 0; transform: translateY(-20px); }\n            to { opacity: 1; transform: translateY(0); }\n        }\n        \n        .field-error {\n            animation: fadeIn 0.3s ease;\n        }\n        \n        .is-invalid {\n            border-color: #dc3545 !important;\n            box-shadow: 0 0 0 0.2rem rgba(220, 53, 69, 0.25);\n        }\n    ",document.head.appendChild(n),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){e.init()}):e.init(),window.FormHandler=e}();
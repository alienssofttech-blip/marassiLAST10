!function(){"use strict";const e={init:function(){this.setupFormValidation(),this.setupFormSubmission(),this.setupRealTimeValidation()},setupFormValidation:function(){document.querySelectorAll("form").forEach(t=>{t.addEventListener("submit",function(o){o.preventDefault(),e.validateForm(t)&&e.submitForm(t)})})},setupRealTimeValidation:function(){document.querySelectorAll("input[required], textarea[required]").forEach(t=>{t.addEventListener("blur",function(){e.validateField(this)}),t.addEventListener("input",function(){e.clearFieldError(this)})})},validateForm:function(t){let o=!0;return t.querySelectorAll("[required]").forEach(t=>{e.validateField(t)||(o=!1)}),o},validateField:function(t){const o=t.value.trim(),r=t.type;if(e.clearFieldError(t),!o)return e.showFieldError(t,"form_messages.required_field"),!1;if("email"===r&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o))return e.showFieldError(t,"form_messages.invalid_email"),!1;if("tel"===r&&!/^[\+]?[1-9][\d]{0,15}$/.test(o.replace(/[\s\-\(\)]/g,"")))return e.showFieldError(t,"form_messages.invalid_phone"),!1;if("text"===r&&o.length<2)return e.showFieldError(t,"form_messages.name_min_length"),!1;if("TEXTAREA"===t.tagName&&o.length<10)return e.showFieldError(t,"form_messages.message_min_length"),!1;return!0},showFieldError:function(e,t){this.clearFieldError(e);const o=document.createElement("div");o.className="field-error",o.textContent=window.getTranslation?window.getTranslation(t)||t:t,o.style.cssText="color:#dc3545;font-size:12px;margin-top:4px;animation:fadeIn .3s ease",e.parentNode.appendChild(o),e.style.borderColor="#dc3545",e.classList.add("is-invalid")},clearFieldError:function(e){const t=e.parentNode.querySelector(".field-error");t&&t.remove(),e.style.borderColor="",e.classList.remove("is-invalid")},submitForm:function(t){const o=t.querySelector('button[type="submit"]'),r=o.innerHTML;o.innerHTML='<span class="spinner-border spinner-border-sm me-2" role="status"></span>Sending...',o.disabled=!0;const n=new FormData(t),s={};n.forEach((e,t)=>{s[t]=e}),setTimeout(()=>{o.innerHTML=r,o.disabled=!1,e.showSuccessMessage(t),t.reset()},1500)},showSuccessMessage:function(e){const t=document.createElement("div");t.className="alert alert-success";const o=window.getTranslation?window.getTranslation("form_messages.success"):"Thank you! Your message has been sent successfully. We'll get back to you soon.";t.innerHTML=`<i class="ph-bold ph-check-circle me-2"></i>${o}`,t.style.cssText="margin-top:20px;animation:slideDown .5s ease",e.appendChild(t),setTimeout(()=>{t.remove()},5e3)},showErrorMessage:function(e,t){const o=document.createElement("div");o.className="alert alert-danger",o.innerHTML=`<i class="ph-bold ph-x-circle me-2"></i>${t}`,o.style.cssText="margin-top:20px;animation:slideDown .5s ease",e.appendChild(o),setTimeout(()=>{o.remove()},7e3)},setupFormSubmission:function(){document.querySelectorAll('form[action="#"]').forEach(t=>{const o=t.querySelector('input[type="email"]');o&&t.addEventListener("submit",function(t){t.preventDefault(),e.validateField(o)&&(e.handleNewsletterSignup(o.value),o.value="")})})},handleNewsletterSignup:function(e){const t=document.createElement("div");t.className="newsletter-success";const o=window.getTranslation?window.getTranslation("form_messages.newsletter_success"):"Successfully subscribed to newsletter!";t.innerHTML=`<div class="alert alert-success position-fixed" style="top: 20px; right: 20px; z-index: 9999;"><i class="ph-bold ph-check-circle me-2"></i>${o}</div>`,document.body.appendChild(t),setTimeout(()=>{t.remove()},3e3)}},t=document.createElement("style");t.textContent="\n        @keyframes fadeIn {\n            from { opacity: 0; transform: translateY(-10px); }\n            to { opacity: 1; transform: translateY(0); }\n        }\n        \n        @keyframes slideDown {\n            from { opacity: 0; transform: translateY(-20px); }\n            to { opacity: 1; transform: translateY(0); }\n        }\n        \n        .field-error {\n            animation: fadeIn 0.3s ease;\n        }\n        \n        .is-invalid {\n            border-color: #dc3545 !important;\n            box-shadow: 0 0 0 0.2rem rgba(220, 53, 69, 0.25);\n        }\n    ",document.head.appendChild(t),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){e.init()}):e.init(),window.FormHandler=e}();

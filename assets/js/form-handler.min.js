!function(){"use strict";const e={init:function(){this.setupFormValidation(),this.setupFormSubmission(),this.setupRealTimeValidation()},setupFormValidation:function(){document.querySelectorAll("form").forEach(t=>{t.addEventListener("submit",function(n){n.preventDefault(),e.validateForm(t)&&e.submitForm(t)})})},setupRealTimeValidation:function(){document.querySelectorAll("input[required], textarea[required]").forEach(t=>{t.addEventListener("blur",function(){e.validateField(this)}),t.addEventListener("input",function(){e.clearFieldError(this)})})},validateForm:function(t){let n=!0;return t.querySelectorAll("[required]").forEach(t=>{e.validateField(t)||(n=!1)}),n},validateField:function(t){const n=t.value.trim(),s=t.type;t.name||t.getAttribute("data-i18n-placeholder")||t.placeholder;if(e.clearFieldError(t),!n)return e.showFieldError(t,"form_messages.required_field"),!1;if("email"===s){if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n))return e.showFieldError(t,"form_messages.invalid_email"),!1}if("tel"===s){if(!/^[\+]?[1-9][\d]{0,15}$/.test(n.replace(/[\s\-\(\)]/g,"")))return e.showFieldError(t,"form_messages.invalid_phone"),!1}return"text"===s&&n.length<2?(e.showFieldError(t,"form_messages.name_min_length"),!1):!("TEXTAREA"===t.tagName&&n.length<10)||(e.showFieldError(t,"form_messages.message_min_length"),!1)},showFieldError:function(t,n){e.clearFieldError(t);const s=document.createElement("div");s.className="field-error",s.textContent=window.getTranslation&&window.getTranslation(n)||n,s.style.cssText="\n                color: #dc3545;\n                font-size: 12px;\n                margin-top: 4px;\n                animation: fadeIn 0.3s ease;\n            ",t.parentNode.appendChild(s),t.style.borderColor="#dc3545",t.classList.add("is-invalid")},clearFieldError:function(e){const t=e.parentNode.querySelector(".field-error");t&&t.remove(),e.style.borderColor="",e.classList.remove("is-invalid")},submitForm:function(t){const n=t.querySelector('button[type="submit"]'),s=n.innerHTML;n.innerHTML='\n                <span class="spinner-border spinner-border-sm me-2" role="status"></span>\n                Sending...\n            ',n.disabled=!0;const r=new FormData(t),o={};r.forEach((e,t)=>{o[t]=e}),fetch("http://localhost:3000/send-contact",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then(e=>e.json()).then(n=>{n.success?(e.showSuccessMessage(t),t.reset()):e.showErrorMessage(t,n.error||"Failed to send message.")}).catch(n=>{e.showErrorMessage(t,n.message||"Failed to send message.")}).finally(()=>{n.innerHTML=s,n.disabled=!1})},showSuccessMessage:function(e){const t=document.createElement("div");t.className="alert alert-success";const n=window.getTranslation?window.getTranslation("form_messages.success"):"Thank you! Your message has been sent successfully. We'll get back to you soon.";t.innerHTML=`<i class="ph-bold ph-check-circle me-2"></i>${n}`,t.style.cssText="\n                margin-top: 20px;\n                animation: slideDown 0.5s ease;\n            ",e.appendChild(t),setTimeout(()=>{t.remove()},5e3)},showErrorMessage:function(e,t){const n=document.createElement("div");n.className="alert alert-danger",n.innerHTML=`<i class="ph-bold ph-x-circle me-2"></i>${t}`,n.style.cssText="\n                margin-top: 20px;\n                animation: slideDown 0.5s ease;\n            ",e.appendChild(n),setTimeout(()=>{n.remove()},7e3)},setupFormSubmission:function(){document.querySelectorAll('form[action="#"]').forEach(t=>{const n=t.querySelector('input[type="email"]');n&&t.addEventListener("submit",function(t){t.preventDefault(),e.validateField(n)&&(e.handleNewsletterSignup(n.value),n.value="")})})},handleNewsletterSignup:function(e){const t=document.createElement("div");t.className="newsletter-success";const n=window.getTranslation?window.getTranslation("form_messages.newsletter_success"):"Successfully subscribed to newsletter!";t.innerHTML=`<div class="alert alert-success position-fixed" style="top: 20px; right: 20px; z-index: 9999;"><i class="ph-bold ph-check-circle me-2"></i>${n}</div>`,document.body.appendChild(t),setTimeout(()=>{t.remove()},3e3)}},t=document.createElement("style");t.textContent="\n        @keyframes fadeIn {\n            from { opacity: 0; transform: translateY(-10px); }\n            to { opacity: 1; transform: translateY(0); }\n        }\n        \n        @keyframes slideDown {\n            from { opacity: 0; transform: translateY(-20px); }\n            to { opacity: 1; transform: translateY(0); }\n        }\n        \n        .field-error {\n            animation: fadeIn 0.3s ease;\n        }\n        \n        .is-invalid {\n            border-color: #dc3545 !important;\n            box-shadow: 0 0 0 0.2rem rgba(220, 53, 69, 0.25);\n        }\n    ",document.head.appendChild(t),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){e.init()}):e.init(),window.FormHandler=e}();